---
title: starstruct
weight: 1
---
Explore the following sections to learn more:

{{< cards >}}
{{< /cards >}}

<!-- gomarkdoc:embed:start -->

<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# starstruct

```go
import "github.com/gemini-oss/rego/pkg/common/starstruct"
```

pkg/common/starstruct/fields.go

pkg/common/starstruct/struct.go

## Index

- [func DerefPointers\(val reflect.Value\) \(reflect.Value, error\)](<#DerefPointers>)
- [func FlattenNestedStructs\(item interface\{\}, prefix string, fieldMap \*map\[string\]string\) error](<#FlattenNestedStructs>)
- [func FlattenStructFields\(item interface\{\}, opts ...Option\) \(\[\]\[\]string, error\)](<#FlattenStructFields>)
- [func GenerateFieldNames\(prefix string, val reflect.Value, opts ...Option\) \(\*\[\]string, error\)](<#GenerateFieldNames>)
- [func MergeFields\(baseline, candidate \[\]string\) \[\]string](<#MergeFields>)
- [func PrettyJSON\(data interface\{\}\) \(string, error\)](<#PrettyJSON>)
- [func TableToStructs\(data \[\]\[\]string\) \(\[\]interface\{\}, error\)](<#TableToStructs>)
- [func ToMap\(item interface\{\}, includeZeroValues bool\) \(map\[string\]interface\{\}, error\)](<#ToMap>)
- [type Option](<#Option>)
  - [func WithExcludeNil\(\) Option](<#WithExcludeNil>)
  - [func WithGenerate\(\) Option](<#WithGenerate>)
  - [func WithHeaders\(headers \*\[\]string\) Option](<#WithHeaders>)
  - [func WithSort\(\) Option](<#WithSort>)


<a name="DerefPointers"></a>
## func DerefPointers

```go
func DerefPointers(val reflect.Value) (reflect.Value, error)
```

DerefPointers takes a reflect.Value and recursively dereferences it if it's a pointer.

<a name="FlattenNestedStructs"></a>
## func FlattenNestedStructs

```go
func FlattenNestedStructs(item interface{}, prefix string, fieldMap *map[string]string) error
```

FlattenNestedStructs recursively flattens a struct \(and its nested fields\) into a map. The keys are generated using the provided prefix.

<a name="FlattenStructFields"></a>
## func FlattenStructFields

```go
func FlattenStructFields(item interface{}, opts ...Option) ([][]string, error)
```

FlattenStructFields recursively flattens a struct and its nested fields into a two\-dimensional slice.

<a name="GenerateFieldNames"></a>
## func GenerateFieldNames

```go
func GenerateFieldNames(prefix string, val reflect.Value, opts ...Option) (*[]string, error)
```

GenerateFieldNames recursively generates field names from a struct \(or slice/map thereof\), dereferencing pointers as needed.

<a name="MergeFields"></a>
## func MergeFields

```go
func MergeFields(baseline, candidate []string) []string
```

MergeFields merges parent and subfields according to these rules:

1. If a baseline field has candidate subfields \(numeric or non‑numeric\), the baseline field is omitted and the candidate subfields are inserted in its place.
2. \(When numeric candidate subfields exist, they are sorted by their numeric suffix.\)
3. If a candidate field does not map to a baseline field but shares a top‑level prefix, insert it after the last baseline field that has that prefix.
4. Bare candidate fields \(with no dot\) are appended at the end if not in baseline.
5. No duplicates. Baseline ordering is preserved as the “master” order.

<a name="PrettyJSON"></a>
## func PrettyJSON

```go
func PrettyJSON(data interface{}) (string, error)
```

\* Print a struct as a JSON string

<a name="TableToStructs"></a>
## func TableToStructs

```go
func TableToStructs(data [][]string) ([]interface{}, error)
```

TableToStructs converts a \[\]\[\]string into a slice of structs, with the first row as headers.

<a name="ToMap"></a>
## func ToMap

```go
func ToMap(item interface{}, includeZeroValues bool) (map[string]interface{}, error)
```

ToMap converts a struct \(or map\) to a map\[string\]interface\{\}. If includeZeroValues is false then any field with a zero value is skipped.

<a name="Option"></a>
## type Option



```go
type Option func(*pkgConfig)
```

<a name="WithExcludeNil"></a>
### func WithExcludeNil

```go
func WithExcludeNil() Option
```

WithExcludeNilStructs instructs the package to skip expanding fields in nil pointer\-structs.

<a name="WithGenerate"></a>
### func WithGenerate

```go
func WithGenerate() Option
```

WithGenerateFields tells the package to generate fields dynamically

<a name="WithHeaders"></a>
### func WithHeaders

```go
func WithHeaders(headers *[]string) Option
```

WithHeaders tells the package to use the provided headers

<a name="WithSort"></a>
### func WithSort

```go
func WithSort() Option
```

WithSortFields tells the package to sort the fields of the struct

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)


<!-- gomarkdoc:embed:end -->
