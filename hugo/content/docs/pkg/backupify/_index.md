---
title: backupify
weight: 1
---
Explore the following sections to learn more:

{{< cards >}}
{{< /cards >}}

<!-- gomarkdoc:embed:start -->

<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# backupify

```go
import "github.com/gemini-oss/rego/pkg/backupify"
```

pkg/backupify/activities.go

pkg/backupify/backupify.go

pkg/backupify/entities.go

pkg/backupify/exports.go

pkg/backupify/snapshots.go

pkg/backupify/users.go

## Index

- [type Activities](<#Activities>)
- [type ActivitiesPayload](<#ActivitiesPayload>)
- [type ActivitiesResponse](<#ActivitiesResponse>)
- [type ActivityClient](<#ActivityClient>)
  - [func \(c \*ActivityClient\) GetActivities\(\) \(\*Activities, error\)](<#ActivityClient.GetActivities>)
- [type ActivityDetail](<#ActivityDetail>)
  - [func \(ad \*ActivityDetail\) Map\(\) map\[int64\]\*Item](<#ActivityDetail.Map>)
- [type AppType](<#AppType>)
- [type Client](<#Client>)
  - [func NewClient\(verbosity int, opts ...ClientOption\) \*Client](<#NewClient>)
  - [func \(c \*Client\) Activities\(\) \*ActivityClient](<#Client.Activities>)
  - [func \(c \*Client\) BuildURL\(endpoint string, identifiers ...interface\{\}\) string](<#Client.BuildURL>)
  - [func \(c \*Client\) CheckExportFilters\(activities \*Activities\)](<#Client.CheckExportFilters>)
  - [func \(c \*Client\) Exports\(\) \*ExportClient](<#Client.Exports>)
  - [func \(c \*Client\) GetCache\(key string, target interface\{\}\) bool](<#Client.GetCache>)
  - [func \(c \*Client\) SetCache\(key string, value interface\{\}, duration time.Duration\)](<#Client.SetCache>)
  - [func \(c \*Client\) Snapshots\(\) \*SnapshotClient](<#Client.Snapshots>)
  - [func \(c \*Client\) UseCache\(\) \*Client](<#Client.UseCache>)
  - [func \(c \*Client\) Users\(\) \*UserClient](<#Client.Users>)
- [type ClientOption](<#ClientOption>)
- [type Column](<#Column>)
- [type DeletePayload](<#DeletePayload>)
- [type Description](<#Description>)
- [type Export](<#Export>)
- [type ExportClient](<#ExportClient>)
  - [func \(c \*ExportClient\) DeleteExport\(activity \*Item, export \*Export\) error](<#ExportClient.DeleteExport>)
  - [func \(c \*ExportClient\) DownloadAvailableExports\(activities \*Activities\) \[\]\[\]string](<#ExportClient.DownloadAvailableExports>)
  - [func \(c \*ExportClient\) DownloadExport\(activity \*Item, export \*Export\) \(\[\]string, error\)](<#ExportClient.DownloadExport>)
  - [func \(c \*ExportClient\) ExportUser\(user \*User\) \(\*Exports, error\)](<#ExportClient.ExportUser>)
  - [func \(c \*ExportClient\) ExportUsers\(users \*Users\) \(\[\]Exports, error\)](<#ExportClient.ExportUsers>)
- [type ExportPayload](<#ExportPayload>)
- [type ExportQuery](<#ExportQuery>)
- [type Exports](<#Exports>)
- [type Filters](<#Filters>)
- [type Item](<#Item>)
- [type Order](<#Order>)
- [type ResponseData](<#ResponseData>)
- [type Run](<#Run>)
- [type Search](<#Search>)
- [type Service](<#Service>)
- [type Snapshot](<#Snapshot>)
- [type SnapshotClient](<#SnapshotClient>)
  - [func \(c \*SnapshotClient\) GetSnapshotDates\(user \*User\) \(\*Snapshots, error\)](<#SnapshotClient.GetSnapshotDates>)
- [type Snapshots](<#Snapshots>)
- [type SnapshotsPayload](<#SnapshotsPayload>)
- [type Stats](<#Stats>)
- [type User](<#User>)
- [type UserClient](<#UserClient>)
  - [func \(c \*UserClient\) GetAllUsers\(\) \(\*Users, error\)](<#UserClient.GetAllUsers>)
  - [func \(c \*UserClient\) UserStorageReport\(users \*Users\) map\[string\]UserCounts](<#UserClient.UserStorageReport>)
- [type UserCounts](<#UserCounts>)
- [type UserPayload](<#UserPayload>)
- [type Users](<#Users>)
  - [func \(u \*Users\) Map\(\) map\[string\]\*User](<#Users.Map>)


<a name="Activities"></a>
## type Activities



```go
type Activities struct {
    Export  ActivityDetail `json:"export,omitempty"`  // Details of export activities
    Restore ActivityDetail `json:"restore,omitempty"` // Details of restore activities
    Backups ActivityDetail `json:"backups,omitempty"` // Details of backup activities
}
```

<a name="ActivitiesPayload"></a>
## type ActivitiesPayload



```go
type ActivitiesPayload struct {
    AppType AppType `json:"appType"` // Type of Backupify application. e.g., "GoogleDrive", "GoogleTeamDrives", etc.
}
```

<a name="ActivitiesResponse"></a>
## type ActivitiesResponse

\#\#\# Backupify Activity Structs \-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-

```go
type ActivitiesResponse struct {
    Activities Activities `json:"activities,omitempty"` // Activities {Exports, Restores, Backups}
}
```

<a name="ActivityClient"></a>
## type ActivityClient

ActivityClient for chaining methods

```go
type ActivityClient struct {
    *Client
}
```

<a name="ActivityClient.GetActivities"></a>
### func \(\*ActivityClient\) GetActivities

```go
func (c *ActivityClient) GetActivities() (*Activities, error)
```



<a name="ActivityDetail"></a>
## type ActivityDetail



```go
type ActivityDetail struct {
    HasActive bool    `json:"hasActive,omitempty"` // Indicates if there is an active status
    Items     []*Item `json:"items,omitempty"`     // List of individual items in the activity
}
```

<a name="ActivityDetail.Map"></a>
### func \(\*ActivityDetail\) Map

```go
func (ad *ActivityDetail) Map() map[int64]*Item
```



<a name="AppType"></a>
## type AppType



```go
type AppType string // AppType is the type of Backupify application.
```

<a name="GoogleDrive"></a>

```go
var (
    GoogleDrive AppType = "GoogleDrive"
    SharedDrive AppType = "GoogleTeamDrives"
    GoogleMail  AppType = "GoogleMail"
)
```

<a name="Client"></a>
## type Client

\#\#\# Backupify Client Structs \-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-

```go
type Client struct {
    BaseURL string           // BaseURL is the base URL for Backupify requests.
    HTTP    *requests.Client // HTTPClient is the client used to make HTTP requests.
    Error   string           // Error is the error message returned from the Backupify WebUI.
    Log     *log.Logger      // Log is the logger used to log messages.
    Cache   *cache.Cache     // Cache is the cache used to store responses from the Backupify WebUI.

    AppType AppType // AppType is the type of Backupify application.
    // contains filtered or unexported fields
}
```

<a name="NewClient"></a>
### func NewClient

```go
func NewClient(verbosity int, opts ...ClientOption) *Client
```

\- \# Generate Backupify Client

- @param logger \*log.Logger
- @return \*Client
- Example:

\`\`\`go

```
b := backupify.NewClient(log.DEBUG)
```

\`\`\`

<a name="Client.Activities"></a>
### func \(\*Client\) Activities

```go
func (c *Client) Activities() *ActivityClient
```

Entry point for activity\-related operations

<a name="Client.BuildURL"></a>
### func \(\*Client\) BuildURL

```go
func (c *Client) BuildURL(endpoint string, identifiers ...interface{}) string
```

BuildURL builds a URL for a given resource and identifiers.

<a name="Client.CheckExportFilters"></a>
### func \(\*Client\) CheckExportFilters

```go
func (c *Client) CheckExportFilters(activities *Activities)
```



<a name="Client.Exports"></a>
### func \(\*Client\) Exports

```go
func (c *Client) Exports() *ExportClient
```

Entry point for export\-related operations

<a name="Client.GetCache"></a>
### func \(\*Client\) GetCache

```go
func (c *Client) GetCache(key string, target interface{}) bool
```

\* GetCache retrieves an Backupify response from the cache

<a name="Client.SetCache"></a>
### func \(\*Client\) SetCache

```go
func (c *Client) SetCache(key string, value interface{}, duration time.Duration)
```

\* SetCache stores an Backupify response in the cache

<a name="Client.Snapshots"></a>
### func \(\*Client\) Snapshots

```go
func (c *Client) Snapshots() *SnapshotClient
```

Entry point for export\-related operations

<a name="Client.UseCache"></a>
### func \(\*Client\) UseCache

```go
func (c *Client) UseCache() *Client
```

UseCache\(\) enables caching for the next method call.

<a name="Client.Users"></a>
### func \(\*Client\) Users

```go
func (c *Client) Users() *UserClient
```

Entry point for export\-related operations

<a name="ClientOption"></a>
## type ClientOption



```go
type ClientOption func(*Client)
```

<a name="Column"></a>
## type Column



```go
type Column struct {
    Data       string `json:"data"`       // Data field
    Name       string `json:"name"`       // Name of the column
    Searchable bool   `json:"searchable"` // Searchable flag
    Orderable  bool   `json:"orderable"`  // Orderable flag
    Search     Search `json:"search"`     // Search criteria
}
```

<a name="DeletePayload"></a>
## type DeletePayload



```go
type DeletePayload struct {
    Type    string  `json:"type"`    // Type of deletion
    AppType AppType `json:"appType"` // Type of Backupify application
    ID      int     `json:"id"`      // Identity to target. e.g. [snapshotID]
}
```

<a name="Description"></a>
## type Description



```go
type Description struct {
    Filters            interface{} `json:"filters,omitempty"`            // Filters applied during the run, can be null
    IncludePermissions bool        `json:"includePermissions,omitempty"` // Indicates if permissions were included
    ItemCount          int         `json:"itemCount,omitempty"`          // Number of items considered
    Query              string      `json:"query,omitempty"`              // Query terms used
    RecoveredBy        string      `json:"recoveredBy,omitempty"`        // Who recovered the run
    Services           []*Service  `json:"services,omitempty"`           // Services involved in the run
    Snapshot           int64       `json:"snapshot,omitempty"`           // Snapshot ID
    TargetService      *Service    `json:"targetService,omitempty"`      // Target service for the run, can be null
    Type               string      `json:"type,omitempty"`               // Type of the description, e.g., full or selected
}
```

<a name="Export"></a>
## type Export



```go
type Export struct {
    ResponseData ResponseData `json:"responseData,omitempty"` // Container for the response data
    Status       string       `json:"state,omitempty"`        // Current status of the export
    SnapshotDate string       `json:"snapshotDate,omitempty"` // Date and time of the snapshot
}
```

<a name="ExportClient"></a>
## type ExportClient

ExportClient for chaining methods

```go
type ExportClient struct {
    *Client
}
```

<a name="ExportClient.DeleteExport"></a>
### func \(\*ExportClient\) DeleteExport

```go
func (c *ExportClient) DeleteExport(activity *Item, export *Export) error
```



<a name="ExportClient.DownloadAvailableExports"></a>
### func \(\*ExportClient\) DownloadAvailableExports

```go
func (c *ExportClient) DownloadAvailableExports(activities *Activities) [][]string
```



<a name="ExportClient.DownloadExport"></a>
### func \(\*ExportClient\) DownloadExport

```go
func (c *ExportClient) DownloadExport(activity *Item, export *Export) ([]string, error)
```



<a name="ExportClient.ExportUser"></a>
### func \(\*ExportClient\) ExportUser

```go
func (c *ExportClient) ExportUser(user *User) (*Exports, error)
```



<a name="ExportClient.ExportUsers"></a>
### func \(\*ExportClient\) ExportUsers

```go
func (c *ExportClient) ExportUsers(users *Users) ([]Exports, error)
```



<a name="ExportPayload"></a>
## type ExportPayload



```go
type ExportPayload struct {
    ActionType         string        `json:"actionType"`         // Type of action, e.g., "export"
    AppType            AppType       `json:"appType"`            // Type of application, e.g., "GoogleDrive"
    SnapshotID         string        `json:"snapshotId"`         // ID of the snapshot
    Token              string        `json:"token"`              // Placeholder for a variable
    IncludePermissions bool          `json:"includePermissions"` // Include permissions associated with the files being exported
    IncludeAttachments bool          `json:"includeAttachments"` // Include attachments
    Services           []interface{} `json:"services"`           // Identity to target. e.g. [userID]
}
```

<a name="ExportQuery"></a>
## type ExportQuery



```go
type ExportQuery struct {
    Type    string `json:"type"`    // Type of query. e.g. 'export'
    AppType string `json:"appType"` // Type of application. e.g. 'GoogleDrive'
    ID      int    `json:"id"`      // ID of the export
    EXT     string `json:"ext"`     // Extension of the file. e.g. 'zip'
}
```

<a name="Exports"></a>
## type Exports

\#\#\# Backupify Export Structs \-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-

```go
type Exports []*Export
```

<a name="Filters"></a>
## type Filters



```go
type Filters struct {
    IsDeleted string `json:"isDeleted,omitempty"` // Whether deleted items were included
}
```

<a name="Item"></a>
## type Item



```go
type Item struct {
    BytesWritten string  `json:"bytesWritten,omitempty"` // The amount of data written, can be in various units
    DetailsPath  *string `json:"detailsPath,omitempty"`  // Path to further details, can be null
    Destination  string  `json:"destination,omitempty"`  // Destination of the data
    Export       Export  `json:"export,omitempty"`       // Export details
    Items        string  `json:"items,omitempty"`        // Summary of items processed, in the format "processed / total"
    RecoveredBy  string  `json:"recoveredBy,omitempty"`  // Who recovered the item
    Reason       string  `json:"reason,omitempty"`       // Reason for the current status (typically for failed or cancelled tasks)
    Run          Run     `json:"run,omitempty"`          // Running details
    RunMode      string  `json:"runMode,omitempty"`      // Mode of the run
    Source       string  `json:"source,omitempty"`       // Source of the data
    Stats        Stats   `json:"stats,omitempty"`        // Statistical data
    Status       string  `json:"status,omitempty"`       // Current status of the item
    Timestamp    int64   `json:"timestamp,omitempty"`    // Timestamp of the item creation or modification
    Timetaken    string  `json:"timetaken,omitempty"`    // Time taken for the operation
    Type         string  `json:"type,omitempty"`         // Type of the item
}
```

<a name="Order"></a>
## type Order



```go
type Order struct {
    Column string `json:"column"` // Column index
    Dir    string `json:"dir"`    // Direction
}
```

<a name="ResponseData"></a>
## type ResponseData



```go
type ResponseData struct {
    Action     string `json:"action,omitempty"`     // Action taken, e.g., "Export"
    AppType    string `json:"appType,omitempty"`    // Type of application involved, e.g., "GoogleDrive"
    CustomerId int    `json:"customerId,omitempty"` // Numeric ID of the customer
    ID         int    `json:"id,omitempty"`         // Numeric ID associated with the responseData
    Status     string `json:"status,omitempty"`     // Current status, e.g., "started"
}
```

<a name="Run"></a>
## type Run



```go
type Run struct {
    ActionType            string      `json:"actionType,omitempty"`            // Type of action, e.g., Export or Restore
    AppType               string      `json:"appType,omitempty"`               // Application type involved
    CompletedAt           int64       `json:"completedAt,omitempty"`           // Completion timestamp
    CreatedAt             int64       `json:"createdAt,omitempty"`             // Creation timestamp
    CustomerId            int         `json:"customerId,omitempty"`            // ID of the customer
    Description           Description `json:"description,omitempty"`           // Description of the run
    ID                    int         `json:"id,omitempty"`                    // ID of the run
    TimeTakenMilliseconds int         `json:"timeTakenMilliseconds,omitempty"` // Time taken in milliseconds
}
```

<a name="Search"></a>
## type Search



```go
type Search struct {
    Value string `json:"value"` // Search value
    Regex bool   `json:"regex"` // Regex flag
}
```

<a name="Service"></a>
## type Service



```go
type Service struct {
    ServiceEmail string `json:"serviceEmail,omitempty"` // Email associated with the service
    ServiceId    int    `json:"serviceId,omitempty"`    // ID of the service
    ServiceName  string `json:"serviceName,omitempty"`  // Name of the service
}
```

<a name="Snapshot"></a>
## type Snapshot



```go
type Snapshot struct {
    ID   int64  `json:"snapshotId,omitempty"`         // ID of the snapshot
    Date string `json:"formattedForButton,omitempty"` // Text formatted for display on a button.
}
```

<a name="SnapshotClient"></a>
## type SnapshotClient

SnapshotClient for chaining methods

```go
type SnapshotClient struct {
    *Client
}
```

<a name="SnapshotClient.GetSnapshotDates"></a>
### func \(\*SnapshotClient\) GetSnapshotDates

```go
func (c *SnapshotClient) GetSnapshotDates(user *User) (*Snapshots, error)
```



<a name="Snapshots"></a>
## type Snapshots



```go
type Snapshots map[string][]Snapshot // Map of snapshot dates
```

<a name="SnapshotsPayload"></a>
## type SnapshotsPayload



```go
type SnapshotsPayload struct {
    AppType   AppType `json:"appType"`   // Type of Backupify application
    ServiceID int     `json:"serviceId"` // Identity to target. e.g. [userID]
}
```

<a name="Stats"></a>
## type Stats



```go
type Stats struct {
    BytesWritten int `json:"BytesWritten,omitempty"` // Number of bytes written
    FailureCount int `json:"FailureCount,omitempty"` // Count of failed operations
    SkippedCount int `json:"SkippedCount,omitempty"` // Count of skipped operations
    SuccessCount int `json:"SuccessCount,omitempty"` // Count of successful operations
    TotalCount   int `json:"TotalCount,omitempty"`   // Total number of operations
}
```

<a name="User"></a>
## type User



```go
type User struct {
    AppType        string      `json:"appType,omitempty"`        // Type of the application
    CreatedAt      int64       `json:"createdAt,omitempty"`      // Creation timestamp
    CustomerId     int         `json:"customerId,omitempty"`     // ID of the customer
    Deleted        bool        `json:"deleted,omitempty"`        // Deletion flag
    Email          string      `json:"email,omitempty"`          // Email address
    ID             int         `json:"id,omitempty"`             // Unique identifier
    LatestSnap     interface{} `json:"latestSnap,omitempty"`     // Latest snapshot ID
    LocalSize      int64       `json:"localSize,omitempty"`      // Local size
    Name           string      `json:"name,omitempty"`           // Name of the item
    OwnSize        int64       `json:"ownSize,omitempty"`        // Owned size
    Path           string      `json:"path,omitempty"`           // File path
    PerfectBackups []Snapshot  `json:"perfectBackups,omitempty"` // List of perfect backups
    ReferencedSize int         `json:"referencedSize,omitempty"` // Referenced size
    Snapshots      []Snapshot  `json:"snapshots,omitempty"`      // List of snapshots
    SnapshotDates  *Snapshots  `json:"snapshotDates,omitempty"`  // Map of snapshot dates
    Status         string      `json:"status,omitempty"`         // Status of the item
    StorageFormat  string      `json:"storageFormat,omitempty"`  // Storage format
    UpdatedAt      int64       `json:"updatedAt,omitempty"`      // Update timestamp
    UsedBytes      string      `json:"usedBytes,omitempty"`      // Used bytes in string format
    UsedBytesFloat float64     `json:"usedBytesFloat,omitempty"` // Used bytes in float format
}
```

<a name="UserClient"></a>
## type UserClient

UserClient for chaining methods

```go
type UserClient struct {
    *Client
}
```

<a name="UserClient.GetAllUsers"></a>
### func \(\*UserClient\) GetAllUsers

```go
func (c *UserClient) GetAllUsers() (*Users, error)
```

GetAllUsers\(\) retrieves all users from Backupify.

<a name="UserClient.UserStorageReport"></a>
### func \(\*UserClient\) UserStorageReport

```go
func (c *UserClient) UserStorageReport(users *Users) map[string]UserCounts
```

Initialize a map to count users and sum storage by the first letter of their email

<a name="UserCounts"></a>
## type UserCounts



```go
type UserCounts struct {
    Count        int
    TotalStorage float64
}
```

<a name="UserPayload"></a>
## type UserPayload



```go
type UserPayload struct {
    Draw    string   `json:"draw"`    // The draw number
    Columns []Column `json:"columns"` // List of columns
    Order   []Order  `json:"order"`   // List of order items
    Start   int      `json:"start"`   // Start index
    Length  int      `json:"length"`  // Length of the request
    Search  Search   `json:"search"`  // Search criteria
    AppType AppType  `json:"appType"` // Type of Backupify application
}
```

<a name="Users"></a>
## type Users

\#\#\# Backupify User Structs \-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-

```go
type Users struct {
    Draw            int     `json:"draw,omitempty"`            // The draw number
    Data            []*User `json:"data,omitempty"`            // List of data items
    RecordsTotal    int     `json:"recordsTotal,omitempty"`    // Total number of records
    RecordsFiltered int     `json:"recordsFiltered,omitempty"` // Number of filtered records
}
```

<a name="Users.Map"></a>
### func \(\*Users\) Map

```go
func (u *Users) Map() map[string]*User
```



Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)


<!-- gomarkdoc:embed:end -->
